# 编码风格与人性

*2015-08-09*

编程界的编码风格（Coding Style），指的是代码的书写风格或规范，如缩进是空格还是tab，加不加分号，变量命名等。

## 我的变化历程

### 分号

我基本在写JS，（多数情况下）分号可以省略，因此我不加，原因详见[这里](http://blog.fritx.me/?2015/01/why-no-semicolon)。但在两年前，我非加不可，出于强迫症，我还得帮别人加。

### 缩进

以前用tab，后来4空格，现在2空格。原因是，tab在一些地方显示成8空格，或者更变态，只有空格能够保持一致。2空格比4空格更紧凑，便于显示嵌套的代码。

### 变量命名

以前遵守JS原生命名习惯，类似JAVA的驼峰式，如`fullURL`，现在倾向于C/Python系的纯小写结合下划线，如`full_url`，并且非万不得已我不加下划线，即`fullurl`。原因是优雅，Python不是号称最优雅的语言吗？（当然还有方便，方便是我的第二个原则。）

## 遵守规范

一般来说，一个项目有一套相同的规范，甚至，一些团队推行自己专属的规范。这十分正常，为了保证代码的一致性和可靠性，也利于成员之间沟通。一般情况下，会有一个负责任的、具有强迫症的人来要求你加或不加分号。

## 借用工具

### 规范检查

市面上不缺少这些辅助工具。[jshint](https://github.com/jshint/jshint)等能够帮你量化和定义一套规范，验证编码风格，顺带检查语法错误等，你可以在提交代码前运行它。当然，这些最好集成进你的项目构建工具（Build System）当中。

### 规范转换

市面上有一堆代码转换（或编译）工具，如coffee、babel等，应该不缺处理编码风格的。我知道[semi](https://github.com/yyx990803/semi)可以用来转换加或不加分号，关于缩进和变量命名，如果你知道有哪些工具请顺带告诉我，谢了！

## 人性

编码风格是个喜好问题，并没有对错。只要不是错的，就都是对的。每个程序员都有自己的想法，我们应该尊重他们。

所以请不要再要求别人和你一样了，别人不是你，你也不是别人。

强迫症是对的，我也有。如果你拿强迫症来让自己和别人受罪，那么你就太SB了。

如果你有个开源项目，出现了几个很有建设性的PR，难道你会因为编码风格的差异，而选择不合并吗？你不能够先合并，然后再定期地通过工具来统一吗？两者兼得。

这就引出了我的一个设想。即在项目中，允许多方输入可用但风格不一致的代码，项目会定期借用工具自行修整。这会带来如下优势：

- 及时高效地合并可用代码，不纠结
- 减少手动修整代码带来的无效提交（Commit），不干扰代码追踪
- 通过工具定期修整，带来完整性、配置性、自动化上的优势
- 程序员专注输出可用代码，无需关心编码风格
- 对程序员友好，尊重个性，弘扬人性
